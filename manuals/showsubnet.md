# Documentation for script: _showsubnet.py_

## Summary
To verify the validity of assignments made by [_YutanpaNet.py_](YutanpaNet.md), an efficient graphical visualization of the assignments is necessary. _ShowSubnet_ uses the core network files generated by the program [_YutanpaNet.py_](YutanpaNet.md) to create an interactive graphical layout of any subnetwork involving user-specified systems in TCDB or proteins in the query genome. The network groups the systems and their components as annotated in TCDB and shows links to all proteins in the query genome matching the components:
  1) The colors of the edges indicate if the coverage of the alinments between proteins in the query genome and the corresponding components in TCDB is good (cyan) or low (purple), which could indicate potential fusions.  
  2) The widths of the edges are proportional to the quality of the alignments. Also, if the path to the plots generated by program [_getMultCompSystems_](https://github.com/SaierLaboratory/TCDBtools/blob/master/manuals/getMultCompSystems.md) is given, clicking on an edge will take you to the corresponding plots showing the quality of the corresponding alignment, including hydropathy curves and [Pfam](https://pfam.xfam.org/) domains.
  3) The shapes of the nodes denote systems (red cube), a component in TCDB (green cone), or a protein in the query genome (yellow sphere). 
  4) The genomic context is conveyed via the spatial relationships between nodes representing genome proteins, that is, nodes located along a horizontal line are neighbors.  
  
Some subnetworks can be quite large (e.g. ABC systems), so the interface also includes a search function to identify specific proteins. This tool helps the user visualize homologous systems competing for the same set of genes in the query genome and allows validation of the initial assignments by program YutanpaNet.


## Contributors  
Yichi Zhang and Arturo Medrano-Soto  


## Dependencies
The following Python module needs to be available to the script: 

1. **Python 3.X**  
You can download the latest version of Python 3 from the [official website](https://www.python.org/).
YutanpaNet was tested with Python 3.7.4 in MacOS Catalina 10.5.6. In addition, this program requires
access to the functions in script [_YutanpaNet.py_](YutanpaNet.md), which is included in the BioVx distribution.  

2. **Core network files generated by script _YutanpaNet.py_**  
Run first [_YutanpaNet.py_](YutanpaNet.md) and then pass the generated files to this script.  

3. **HTML template: _network_gui_templete.html.bkp_**  
This file is part of the BioVx distribution.


## Command line options
The following options are available:

    -h, --help          show this help message and exit
    
    -ft <genome feature table>, --featuretable <genome feature table>
                        MANDATORY. Path to the feature table file as
                        downloaded from NCBI genome assemblies. This file is
                        used to extract the genomic context of genes and it
                        must be compressed in gzip format.
                        
    -lt, --locus_tag    Flag. If set, the program will use locus_tag
                        accessions to identify proteins in the query genome.
                        Users are responsible for deciding whether RefSeq or
                        locus_tag accessions will be used in the analysis.
                        Default value is RefSeq.
                        
    -ad <directory path>, --address <directory path>
                        Path to the main output directory generated by program
                        getMultCompSystems.pl. This directory will be used to
                        generate links to hydropathy plots for all matches
                        between the query genome and multicomponent systems in
                        TCDB. If not specified, the edges of subnetworks will
                        not be linked to the corresponding hydropathy plots.
                        
    -l <accessions list>, --list <accessions list>
                        Mandatory. List of TC systems or protein accessions or
                        both, in the genome seperated by comma (e.g.,
                        "1.A.30.2.1,dmul_13829").
                        
    -w, --whole         Flag. If set, visualize the whole processed network.
                        This action supersedes any accessions provided with
                        the -l option.
                        
    -o <string>         The name of the subnetwork that will be generated.
                        Default value: isolated_systems.
                        
    -c, --circular      Flag. If set, the replicon structure of the query
                        genome is regarded as circular. This information is
                        used to calculate the distance between pairs of genes.
                        The default setting is: linear.
                        
